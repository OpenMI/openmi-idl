syntax="proto3";

option cc_enable_arenas = true;
option java_outer_classname = "FeatureConfListProto";
option java_multiple_files = true;
option java_package = "org.openmi.proto.feature.conf";

package openmi.proto.conf;

enum FeatureDataType {
  STRING = 0;
  FLOAT = 1;
  DOUBLE = 2;
  INT32 = 3;
  INT64 = 4;
  BOOL = 5;
  INVALID = 6;
};

// drop in the future
message FeatureProcessConf {
  string name = 1;
  string feature_op = 2;
  int32 col_id = 3;
  repeated string inputs = 4;
  bool hidden = 5;
  string args = 6;
  FeatureDataType data_type = 7;
}

message FeatureProcessConfList {
  repeated FeatureProcessConf features = 1;
}

// feature extract to instance
message FeatureExtractConf {
  string name = 1;
  string feature_op = 2;
  int32 col_id = 3;
  repeated string inputs = 4;
  bool hidden = 5;
  string args = 6;
  FeatureDataType data_type = 7;
}

message FeatureExtractConfList {
  repeated FeatureExtractConf features = 1;
}

// feature mapping config 
message BucketConf {
  float min = 1;
  float max = 2;
  int32 bucket_size = 3;
}

message FeatureMapping {
  string name = 1;
  int32 col_id = 2;
  bool use_bucket = 3;
  BucketConf bucket = 4;
  string custom_bucket = 5;
  string custom_bucket_delimiter = 6;
}

message FeatureMappingList {
  repeated FeatureMapping mapping = 1;
}
